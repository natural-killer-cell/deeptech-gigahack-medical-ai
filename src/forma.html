<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Medical Aid</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: Inter;
            font-weight: 500;
            line-height: 24.2px;
            letter-spacing: -0.04em;
            text-align: left;
        }

        .navbar-custom {
            background-color: transparent;
            padding: 20px;
        }

        .navbar-custom .navbar-nav .nav-link {
            color: #000;
            font-size: 18px;
            font-weight: bold;
            margin-right: 20px;
        }

        .navbar-custom .navbar-nav .nav-link:hover {
            color: #a78bfa;
        }

        .navbar-custom .navbar-brand {
            font-weight: bold;
            font-size: 24px;
        }

        .card {
            background-color: #f3e8ff;
            left: 63px;
            padding: 60px;
            gap: 10px;
            border-radius: 30px;
            border: 1px 0px 0px 0px;
            opacity: 0px;
            border-color: #000;
        }

        .btn-custom {
            background-color: #d7bfff;
            color: black;
        }

        .btn-custom:hover {
            background-color: #c9adff;
        }

        .upload-area {
            background-color: white;
            padding: 30px;
            text-align: center;
            border-radius: 30px;
        }

        .upload-area p {
            color: gray;
        }

        .upload-area input {
            border-radius: 30px;
        }

        .rounded-pill {
            width: 40px;
            height: 40px;
            background-color: #c9adff;
        }

        .username {
            position: absolute;
            top: 20px;
            right: 20px;
            color: #6a3a9e;
        }

        .username i {
            margin-right: 10px;
        }

        .btn-outline-secondary {
            border-radius: 30px;
            margin: 3px;
            background: white;
            color: #000;
            border-color: #000;
        }

        .btn-custom {
            border-radius: 30px;
            border-color: #000;
            padding: 30px;
            width: 285px;
            height: 200px;
            margin: 15px;
            font-size: 30px;
            font-weight: 500;
           
        }

        .btn-custom-active {
            background-color: #a78bfa; /* Цвет для подсвеченной кнопки */
            color: white;
        }

        h3 {
            font-weight: 500;
        }

        .popup-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            display: none;
            justify-content: center;
            align-items: center;
        }

        .popup-content {
            background-color: white;
            padding: 20px;
            border-radius: 10px;
            width: 500px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        .popup-content h3 {
            margin-bottom: 20px;
        }

        .popup-content p {
            font-size: 18px;
            margin: 5px 0;
        }

        .close-btn {
            margin-top: 20px;
            padding: 10px 20px;
            background-color: #000;
            color: #fff;
            border: none;
            border-radius: 30px;
            cursor: pointer;
        }

    </style>
</head>

<body>
    <nav class="navbar navbar-expand-lg navbar-light navbar-custom">
        <a class="navbar-brand" href="http://127.0.0.1/deeptech-gigahack-medical-ai/src/index.html"> <img src="images/logo.svg" style="width: 50px;" alt="logo"> MEDAID</a>
        <div class="collapse navbar-collapse">
            <ul class="navbar-nav ml-auto">            
                <li class="nav-item">
                    <button class="btn username">Username</button>
                </li>
            </ul>
        </div>
    </nav>

    <div class="container mt-4">
        <div class="card mt-3">
            <h3>Select Imagistic Technique:</h3>
            <div class="d-flex justify-content-around my-4">
                <a href="#type" class="btn btn-custom">
                    <p>
                        <img src="images/ecography.svg" style="width: 100px;" alt="logo">
                        <br>
                        Ecography
                    </p>
                </a>
                <a href="#type" class="btn btn-custom">
                   <p>
                    <img src="images/xray.svg" style="width: 100px;" alt="logo">
                    <br>
                    X-Ray
                   </p>
                </a>
                <a href="#type"ton class="btn btn-custom">
                    <p style="position: relative; top: -20px">
                        <img src="images/ct.svg" style="width: 130px;" alt="logo">
                        <br>
                        <span style="position:relative; top: -10px;"> CT</span>
                    </p>
                </a>
                <a href="#type" class="btn btn-custom">
                    <p>
                        <img src="images/mri.svg" style="width: 100px;" alt="logo">
                        <br>
                        MRI
                    </p>
                </a>
            </div>
            <span id="type"></span>
        </div>

        <div class="card" style="margin-top: 50px;">
            <h3>Select Type And Anatomic Region:</h3>
            <div class="row">
                <div class="col-md-6">
                    <h4 class="mt-4 mb-3">Musculoskeletal</h4>
                    <strong>Soft Tissue</strong><br>
                    <div class="col-12 mt-2">
                        <a href="#img" class="btn btn-outline-secondary btn-sm">Salivary Glands</a>
                        <a href="#img" class="btn btn-outline-secondary btn-sm">Fat Tissue</a>
                        <a href="#img" class="btn btn-outline-secondary btn-sm">Muscle Tissue</a>
                        <a href="#img" class="btn btn-outline-secondary btn-sm">Skin</a>
                        <a href="#img"utton class="btn btn-outline-secondary btn-sm">Lymph Nodes</a>
                    </div>

                    <div class="mb-2 mt-3">
                        <strong>Joints</strong><br>
                        <div class="mt-2">
                            <a href="#img" class="btn btn-outline-secondary btn-sm">Temporo-Mandibular Joint</a>
                            <a href="#img" class="btn btn-outline-secondary btn-sm">Shoulder</a>
                            <a href="#img" class="btn btn-outline-secondary btn-sm">Elbow</a>
                            <a href="#img" class="btn btn-outline-secondary btn-sm">Wrist</a>
                            <a href="#img" class="btn btn-outline-secondary btn-sm">Hand/Fingers</a>
                            <a href="#img" class="btn btn-outline-secondary btn-sm">Leg/Fingers</a>
                            <a href="#img" class="btn btn-outline-secondary btn-sm">Knee</a>
                            <a href="#img" class="btn btn-outline-secondary btn-sm">Hip</a>
                            <a href="#img" class="btn btn-outline-secondary btn-sm">Ankle</a>
                        </div>
                    </div>
                </div>
                <div class="col-md-6">
                    <h4 class="mt-4 mb-3">Internal Organs</h4>
                    <div class="mb-2">
                        <strong>Neck & Chest</strong><br>
                        <div class="mt-2">
                            <a href="#img" class="btn btn-outline-secondary btn-sm">Thyroid Gland</a>
                            <a href="#img" class="btn btn-outline-secondary btn-sm">Lungs</a>
                            <a href="#img" class="btn btn-outline-secondary btn-sm">Heart</a>
                            <a href="#img" class="btn btn-outline-secondary btn-sm">Mammary Glands</a>
                            <a href="#img" class="btn btn-outline-secondary btn-sm">Thymus</a>
                        </div>
                    </div>

                    <div class="mb-2 mt-3">
                        <strong>Abdomen</strong><br>
                        <div class="mt-2">
                            <a href="#img" class="btn btn-outline-secondary btn-sm">Liver</a>
                            <a href="#img" class="btn btn-outline-secondary btn-sm">Spleen</a>
                            <a href="#img" class="btn btn-outline-secondary btn-sm">Kidney</a>
                            <a href="#img" class="btn btn-outline-secondary btn-sm">Gallbladder</a>
                            <a href="#img" class="btn btn-outline-secondary btn-sm">Pancreas</a>
                            <a href="#img" class="btn btn-outline-secondary btn-sm">Stomach</a>
                        </div>
                    </div>

                    <div class="mb-2 mt-3">
                        <strong>Pelvis</strong><br>
                        <div class="mt-2">
                            <a href="#img" class="btn btn-outline-secondary btn-sm">Prostate</a>
                            <a href="#img" class="btn btn-outline-secondary btn-sm">Urinary Bladder</a>
                            <a href="#img" class="btn btn-outline-secondary btn-sm">Vascular Glands</a>
                            <a href="#img" class="btn btn-outline-secondary btn-sm">Urethra</a>
                            <a href="#img" class="btn btn-outline-secondary btn-sm">Fallopian Tubes</a>
                            <a href="#img" class="btn btn-outline-secondary btn-sm">Ovaries</a>
                            <a href="#img" class="btn btn-outline-secondary btn-sm">Testis</a>
                        </div>
                    </div>
                </div>
            </div>
            <span id="img"></span>
        </div>

        <div class="card" style="margin-top: 50px; margin-bottom: 20px;">
            <div class="row">
                <div class="col">
                    <h3 class="mb-4">Upload Image</h3>
                </div>
                <div class="col"></div>
                    <img id="infoIcon" src="images/question-circle 1.svg" style="width: 50px; position: relative; top:-10px" alt="logo">
                </div>
                <div class="col">
                    <form id="uploadForm" method="POST" enctype="multipart/form-data">
                        <div class="upload-area">
                            <p style="font-weight: 400;">Choose From File or Drag And Drop</p>
                            <input type="file" name="file" id="fileInput" class="form-control" />
                        </div>
                        <div class="row justify-content-end mt-4">
                            <div class="col-1" style="margin-right: 30px;">
                                <button class="btn btn-login" type="submit" style="border-color: #000; border-radius: 30px;">
                                    Analyze
                                </button>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
        
        <!-- Popup structure -->
        <div id="popup" class="popup-overlay">
            <div class="popup-content" style="text-align: center;">
                <h3>Analysis Result</h3>
                <p id="normaResult">Norma: </p>
                <p id="patologieResult">Patologie: </p>
                <button class="close-btn" onclick="closePopup()">Close</button>
            </div>
        </div>

        <!-- Popup question structure -->
        <div id="popup-question" class="popup-overlay">
            <div class="popup-content" style="width: 850px; text-align: end;">
                <ol class="popup-columns" style="text-align: left;">
                    <li>Well visualization of bone structures - femur condyle & tibial condyle</li>
                    <li>Good visualization of the meniscus itself</li>
                    <li>Supine position for ventral and lateral scans</li>
                    <li>Prone position for dorsal scans</li>
                    <li>Knee joint is neutral position and 30° flexion</li>
                    <li>Maximal flexion for imaging of the intercondylar sulcus</li>
                    <li>Dynamic examination of the suprapatellar pouch with relaxed and contracted quadriceps muscle</li>
                    <li>Standard scans: suprapatellar longitudinal scan, suprapatellar transvers scan in neutral position, suprapatellar transvers scan in maximal flexion, infrapatellar longitudinal scan, infrapatellar transverse scan, medial longitudinal scan, lateral longitudinal scan, posterior medial longitudinal scan, posterior lateral longitudinal scan, posterior transverse scan</li>
                    <li>Anterior: quadriceps tendon, suprapatellar pouch, patella, patellar ligament (tendon), femoral condyle cartilage, tibial tuberosity</li>
                    <li>Medial: medial joint space, medial meniscus (partially), medial collateral ligament, pes anserinus</li>
                    <li>Lateral: lateral joint space, iliotibial band, lateral collateral ligament, lateral meniscus, popliteal tendon</li>
                    <li>Posterior: semimembranosus tendon, posterior horn of medial meniscus, posterior horn of lateral meniscus, popliteal pouch</li>
                </ol>
                <button class="close-btn" onclick="closePopupQuestion()">Close</button>
            </div>
        </div>     

        <script>
            // Handle form submission
            document.getElementById('uploadForm').addEventListener('submit', function (event) {
                event.preventDefault();
                
                var fileInput = document.getElementById('fileInput');
                var formData = new FormData();
                formData.append('file', fileInput.files[0]);
        
                fetch('http://127.0.0.1:5000/predict', {
                    method: 'POST',
                    body: formData
                })
                .then(response => response.json())
                .then(data => {
                    // Update popup content with the server response
                    document.getElementById('normaResult').textContent = `Normal: ${data.Norma}`;
                    document.getElementById('patologieResult').textContent = `Trauma: ${data.Patologie}`;
                    
                    // Show the popup
                    document.getElementById('popup').style.display = 'flex';
                })
                .catch(error => {
                    console.error('Error:', error);
                });
            });
        
            // Function to close the popup
            function closePopup() {
                document.getElementById('popup').style.display = 'none';
            }

            function closePopupQuestion() {
                document.getElementById('popup-question').style.display = 'none';
            }

            function showPopupQuestion() {
                document.getElementById('popup-question').style.display = 'flex';
            }

            document.getElementById('infoIcon').addEventListener('click', showPopupQuestion);
        </script>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const buttons = document.querySelectorAll('.btn-custom');
            buttons.forEach(button => {
                button.addEventListener('click', function () {
                    buttons.forEach(btn => btn.classList.remove('btn-custom-active'));
                    this.classList.add('btn-custom-active');
                });
            });
        });

        document.addEventListener('DOMContentLoaded', function () {
            const buttons = document.querySelectorAll('.btn-outline-secondary');
            
            buttons.forEach(button => {
                button.addEventListener('click', function () {
                    buttons.forEach(btn => btn.classList.remove('btn-custom-active'));
                    this.classList.add('btn-custom-active');
                });
            });
        });
    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
</body>

</html>